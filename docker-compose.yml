version: '3.8'

services:
  tiktok-analysis:
    image: python:3.11-slim
    working_dir: /app
    ports:
      - "8501:8501"
    volumes:
      - .:/app
      - ./data:/app/data
    command: >
      sh -c "pip install -r requirements.txt &&
             python -c 'import nltk; nltk.download(\"punkt_tab\"); nltk.download(\"punkt\"); nltk.download(\"stopwords\")' &&
             streamlit run app.py --server.port=8501 --server.address=0.0.0.0"